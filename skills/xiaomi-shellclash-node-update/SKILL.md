---
name: xiaomi-shellclash-node-update
description: |
  ç”¨äºåœ¨æ­è½½ ShellClash çš„å°ç±³è·¯ç”±å™¨ä¸Šæ›´æ–° Clash èŠ‚ç‚¹é…ç½®æ–‡ä»¶ã€‚
  å½“ç”¨æˆ·éœ€è¦æ›´æ–°è·¯ç”±å™¨èŠ‚ç‚¹ã€ä¸Šä¼  Clash é…ç½®æ—¶æ¿€æ´»ã€‚
source: å®é™…è°ƒè¯•éªŒè¯
confidence: high
last_verified: 2026-01-16
requires_config: true
---

# å°ç±³è·¯ç”±å™¨ ShellClash èŠ‚ç‚¹æ›´æ–°åè®®

æœ¬æŠ€èƒ½ç”¨äºè‡ªåŠ¨æˆ–å¼•å¯¼ç”¨æˆ·å®Œæˆå°ç±³è·¯ç”±å™¨ä¸Šçš„ ShellClash é…ç½®æ–‡ä»¶æ›´æ–°æµç¨‹ã€‚

---

## âš™ï¸ ç¯å¢ƒè¦æ±‚

- **è·¯ç”±å™¨ IP**ï¼šä» `~/.gemini/secrets.env` è¯»å–ï¼ˆæŸ¥æ‰¾"å°ç±³è·¯ç”±å™¨IP"ï¼‰
- **ç”¨æˆ·å**ï¼š`root`
- **SSH å¯†ç **ï¼šä» `~/.gemini/secrets.env` è¯»å–ï¼ˆæŸ¥æ‰¾"SSHå¯†ç "ï¼‰
- **ç®¡ç†å‘½ä»¤**ï¼š`crash`
- **å·¥å…·ä¾èµ–**ï¼š`scp` (éœ€è¦ä½¿ç”¨ `-O` å…¼å®¹ä¼ ç»Ÿæ¨¡å¼)

---

## ğŸš€ è‡ªåŠ¨åŒ–æ‰§è¡Œæµç¨‹

AI åœ¨æ‰§è¡Œæ­¤ä»»åŠ¡æ—¶ï¼Œåº”éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### 1. è¯»å–é…ç½®
å…ˆè¯»å– `~/.gemini/secrets.env` è·å–ï¼š
- å°ç±³è·¯ç”±å™¨ IP
- SSH å¯†ç 

### 2. è¿é€šæ€§æ£€æŸ¥
```bash
ping -c 1 ${å°ç±³è·¯ç”±å™¨IP}
```

### 3. å®Œæ•´æ€§éªŒè¯ï¼ˆå‰ç½®ï¼‰
è¿è¡Œ `ls -l [æœ¬åœ°è·¯å¾„]` è·å–æœ¬åœ°æ–‡ä»¶å­—èŠ‚æ•°å¹¶è®°å½•ã€‚

### 4. ä¸Šä¼ é…ç½®æ–‡ä»¶
ä½¿ç”¨å…¼å®¹æ¨¡å¼ç›´æ¥ä¸Šä¼ æ–‡ä»¶ï¼š
```bash
scp -O [æœ¬åœ°æ–‡ä»¶è·¯å¾„] root@${å°ç±³è·¯ç”±å™¨IP}:/tmp/config.yaml
```

### 5. å®Œæ•´æ€§éªŒè¯ï¼ˆåç½®ï¼‰
ä¸Šä¼ åï¼Œè·å–è¿œç¨‹æ–‡ä»¶å¤§å°å¹¶å¯¹æ¯”ï¼š
```bash
ssh root@${å°ç±³è·¯ç”±å™¨IP} "ls -l /tmp/config.yaml"
```
åªæœ‰è¿œç¨‹ç«¯å­—èŠ‚æ•°ä¸æœ¬åœ°è®°å½•å€¼å®Œå…¨ä¸€è‡´æ—¶ï¼Œæ‰è§†ä¸ºä¼ è¾“æˆåŠŸã€‚

---

## ğŸ–±ï¸ ç”¨æˆ·æ‰‹åŠ¨æ­¥éª¤ (AI å¼•å¯¼)

ä¼ è¾“å®Œæˆåï¼Œå¼•å¯¼ç”¨æˆ·å®Œæˆæœ€åçš„é€»è¾‘è§¦å‘ï¼š

### ç¬¬ä¸€æ­¥ï¼šè§¦å‘å¯¼å…¥
åœ¨è·¯ç”±å™¨ SSH ç»ˆç«¯è¾“å…¥ï¼š
```bash
crash
```
- å¦‚æœå¼¹å‡º"æ£€æµ‹åˆ°æ–°çš„é…ç½®æ–‡ä»¶ï¼Œæ˜¯å¦å¯¼å…¥ï¼Ÿ"ï¼Œé€‰æ‹© **æ˜¯/1**
- å¦‚æœæ²¡æœ‰è‡ªåŠ¨å¼¹å‡ºï¼Œè¿›å…¥ **4 é…ç½®æ–‡ä»¶ç®¡ç†** â†’ **1 å¯¼å…¥é…ç½®æ–‡ä»¶** â†’ **1 æœ¬åœ°å¯¼å…¥**

### ç¬¬äºŒæ­¥ï¼šé‡å¯æœåŠ¡
åœ¨ `crash` ä¸»èœå•é€‰æ‹© **1 å¯åŠ¨/é‡å¯æœåŠ¡**ã€‚

### ç¬¬ä¸‰æ­¥ï¼šåé¦ˆä¸éªŒè¯
> [!IMPORTANT]
> æ‰§è¡Œå®Œæ¯•åï¼Œè¯·å‘é€æ§åˆ¶é¢æ¿ï¼ˆUI ç•Œé¢ï¼‰çš„**èŠ‚ç‚¹åˆ—è¡¨æˆªå›¾**ï¼Œä»¥ä¾¿ç¡®è®¤å»¶è¿ŸçŠ¶æ€æ˜¯å¦æ­£å¸¸ã€‚

---

## ğŸ”’ å…å¯†ç™»å½•é…ç½®ï¼ˆå¯é€‰ï¼‰

ä¸ºå®ç°å…¨è‡ªåŠ¨æ‰§è¡Œï¼Œå¯é…ç½® SSH å…å¯†ç™»å½•ï¼š

```bash
# ç”Ÿæˆæœ¬åœ°å¯†é’¥ï¼ˆå¦‚æœå°šæœªç”Ÿæˆï¼‰
ssh-keygen -t rsa -b 2048 -f ~/.ssh/id_rsa_router -N ""

# å°†å¯†é’¥æ‹·è´åˆ°è·¯ç”±å™¨ï¼ˆéœ€è¦è¾“å…¥ ${SSHå¯†ç }ï¼‰
ssh-copy-id -o HostKeyAlgorithms=+ssh-rsa -o PubkeyAcceptedAlgorithms=+ssh-rsa -i ~/.ssh/id_rsa_router.pub root@${å°ç±³è·¯ç”±å™¨IP}
```

å®Œæˆåï¼Œåœ¨ `~/.ssh/config` ä¸­æ·»åŠ ï¼š
```
Host xiaomi-router
    HostName ${å°ç±³è·¯ç”±å™¨IP}
    User root
    IdentityFile ~/.ssh/id_rsa_router
    HostKeyAlgorithms +ssh-rsa
    PubkeyAcceptedAlgorithms +ssh-rsa
```
